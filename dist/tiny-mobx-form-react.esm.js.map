{"version":3,"file":"tiny-mobx-form-react.esm.js","sources":["../src/form-context.ts","../src/form.tsx","../src/field.tsx","../src/hooks.ts"],"sourcesContent":["import { createContext } from 'react';\nimport { IForm } from 'tiny-mobx-form';\n\ninterface FormContextValue {\n  form: IForm;\n}\n\nexport const FormContext = createContext({} as FormContextValue);\n","import React from 'react';\nimport { Form as FormModel, IFormOptions, IFormSchema, IInitialValues } from 'tiny-mobx-form';\nimport { FormContext } from './form-context';\n\nexport interface FormProps {\n  fields: IFormSchema[];\n  initialValues?: IInitialValues;\n  options?: IFormOptions;\n  children: React.ReactNode;\n}\n\nexport const Form: React.FC<FormProps> = ({\n  fields,\n  initialValues = {},\n  options = {},\n  children,\n}) => {\n  const form = new FormModel(fields, initialValues, options);\n  const value = { form };\n  return <FormContext.Provider value={value}>{children}</FormContext.Provider>;\n};\n","import React, { useContext } from 'react';\nimport { IField } from 'tiny-mobx-form';\nimport { observer } from 'mobx-react-lite';\n\nimport { FormContext } from './form-context';\n\ntype EventType = React.FormEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>;\n\ninterface Input extends Pick<IField, 'name' | 'placeholder' | 'value'> {\n  autoFocus: boolean;\n  key: string;\n  id: string;\n  onChange: (e: EventType) => void;\n}\n\ninterface FieldValue {\n  input: Input;\n  label: string;\n  errors: string[];\n  hasErrors: boolean;\n}\n\ninterface FieldProps {\n  name: string;\n  children: (field: FieldValue) => React.ReactNode | React.ReactElement | any;\n}\n\nfunction Field({ name, children }: FieldProps) {\n  const { form } = useContext(FormContext);\n  if (!(name in form.fields)) {\n    throw Error(`There is no field named ${name}`);\n  }\n  const field = form.fields[name];\n  const {\n    placeholder,\n    value,\n    isFocused,\n    label = '',\n    errors,\n    isTouched,\n    hasErrors: fieldHasErrors,\n  } = field;\n  function change(e: EventType) {\n    field.value = e.currentTarget.value;\n  }\n  const input = {\n    name,\n    placeholder,\n    value,\n    id: name,\n    key: `${name}-${isFocused}`,\n    autoFocus: isFocused,\n    onChange: change,\n  };\n  const hasErrors = isTouched && fieldHasErrors;\n\n  return children({ input, errors, hasErrors, label });\n}\n\nexport const ObservedField = observer(Field);\n","import { useContext } from 'react';\nimport { FormContext } from './form-context';\nimport { IField, IForm } from 'tiny-mobx-form';\n\nexport function useForm(): IForm {\n  const { form } = useContext(FormContext);\n  return form;\n}\n\nexport function useField(fieldName: string): IField {\n  const { form } = useContext(FormContext);\n  if (!(fieldName in form.fields)) {\n    throw Error(`There is no field named ${fieldName}`);\n  }\n  return form.fields[fieldName];\n}\n"],"names":["FormContext","createContext","Form","fields","initialValues","options","children","form","FormModel","value","React","Provider","Field","name","useContext","Error","field","placeholder","isFocused","label","errors","isTouched","fieldHasErrors","hasErrors","change","e","currentTarget","input","id","key","autoFocus","onChange","ObservedField","observer","useForm","useField","fieldName"],"mappings":";;;;AAOO,IAAMA,WAAW;;AAAGC,aAAa,CAAC,EAAD,CAAjC;;ICIMC,IAAI,GAAwB,SAA5BA,IAA4B;MACvCC,cAAAA;gCACAC;MAAAA,gDAAgB;0BAChBC;MAAAA,oCAAU;MACVC,gBAAAA;MAEMC,IAAI,GAAG,IAAIC,MAAJ,CAAcL,MAAd,EAAsBC,aAAtB,EAAqCC,OAArC,CAAb;MACMI,KAAK,GAAG;IAAEF,IAAI,EAAJA;GAAhB;SACOG,mBAAA,CAACV,WAAW,CAACW,QAAb;IAAsBF,KAAK,EAAEA;GAA7B,EAAqCH,QAArC,CAAP;CARK;;ACgBP,SAASM,KAAT;MAAiBC,YAAAA;MAAMP,gBAAAA;;oBACJQ,UAAU,CAACd,WAAD;MAAnBO,mBAAAA;;MACJ,EAAEM,IAAI,IAAIN,IAAI,CAACJ,MAAf,CAAJ,EAA4B;UACpBY,KAAK,8BAA4BF,IAA5B,CAAX;;;MAEIG,KAAK,GAAGT,IAAI,CAACJ,MAAL,CAAYU,IAAZ,CAAd;MAEEI,cAOED,MAPFC;MACAR,QAMEO,MANFP;MACAS,YAKEF,MALFE;qBAKEF,MAJFG;MAAAA,kCAAQ;MACRC,SAGEJ,MAHFI;MACAC,YAEEL,MAFFK;MACWC,iBACTN,MADFO;;WAEOC,MAAT,CAAgBC,CAAhB;IACET,KAAK,CAACP,KAAN,GAAcgB,CAAC,CAACC,aAAF,CAAgBjB,KAA9B;;;MAEIkB,KAAK,GAAG;IACZd,IAAI,EAAJA,IADY;IAEZI,WAAW,EAAXA,WAFY;IAGZR,KAAK,EAALA,KAHY;IAIZmB,EAAE,EAAEf,IAJQ;IAKZgB,GAAG,EAAKhB,IAAL,SAAaK,SALJ;IAMZY,SAAS,EAAEZ,SANC;IAOZa,QAAQ,EAAEP;GAPZ;MASMD,SAAS,GAAGF,SAAS,IAAIC,cAA/B;SAEOhB,QAAQ,CAAC;IAAEqB,KAAK,EAALA,KAAF;IAASP,MAAM,EAANA,MAAT;IAAiBG,SAAS,EAATA,SAAjB;IAA4BJ,KAAK,EAALA;GAA7B,CAAf;;;AAGF,IAAaa,aAAa;;AAAGC,QAAQ,CAACrB,KAAD,CAA9B;;SCvDSsB;oBACGpB,UAAU,CAACd,WAAD;MAAnBO,mBAAAA;;SACDA,IAAP;;AAGF,SAAgB4B,SAASC;qBACNtB,UAAU,CAACd,WAAD;MAAnBO,oBAAAA;;MACJ,EAAE6B,SAAS,IAAI7B,IAAI,CAACJ,MAApB,CAAJ,EAAiC;UACzBY,KAAK,8BAA4BqB,SAA5B,CAAX;;;SAEK7B,IAAI,CAACJ,MAAL,CAAYiC,SAAZ,CAAP;;;;;"}